<!-- container for everything -->
<div ng-controller="MainController" class="emuwebapp-MainCtrl" id="MainCtrl" handleglobalkeystrokes ng-style="{'font-family': cps.vals.font.fontType, 'font-size': cps.vals.font.fontPxSize, 'background': ConfigProviderService.vals.colors.appBackground}">

  <modal></modal>
  
  <!-- left side menu bar -->
  <bundle-list-side-bar ng-show="cps.vals.activeButtons.openMenu && vs.submenuOpen"></bundle-list-side-bar>
  <!-- container for everything (top + bottom menu and all cans) but left sub-menu -->
  <div class="emuwebapp-mainWindow" id="mainWindow">

    <progress-thing show-thing="{{vs.somethingInProgress}}"></progress-thing>
    
    <div class="printTitle">{{lmds.getCurBndlName()}}</div>
    
    <!-- top menu bar -->
    <div class="emuwebapp-menuBarTop">
      <button ng-show="cps.vals.activeButtons.openMenu" id="submenuOpen" ng-click="openSubmenu();" class="emuwebapp-SideMenuBtn left"><img src="img/menuBtn.png"></button>
      <button ng-show="cps.vals.activeButtons.addLevelSeg" ng-disabled="!vs.getPermission('addLevelSegBtnClick')" class="emuwebapp-mini-btn" ng-click="addLevelSegBtnClick();">add level (SEG.)</button> 
      <button ng-show="cps.vals.activeButtons.addLevelEvent" ng-disabled="!vs.getPermission('addLevelPointBtnClick')" class="emuwebapp-mini-btn" ng-click="addLevelPointBtnClick();">add level (EVENT)</button> 
      <button ng-show="cps.vals.activeButtons.renameSelLevel" ng-disabled="!vs.getPermission('renameSelLevelBtnClick')" class="emuwebapp-mini-btn" ng-click="renameSelLevelBtnClick();">rename sel. level</button> 
      <button id="downloadTextgrid" ng-show="cps.vals.activeButtons.downloadTextGrid" ng-disabled="!vs.getPermission('downloadTextGridBtnClick')" class="emuwebapp-mini-btn" ng-click="downloadTextGridBtnClick();">download TextGrid</button> 
      <button id="downloadAnnotation" ng-show="cps.vals.activeButtons.downloadAnnotation" ng-disabled="!vs.getPermission('downloadAnnotationBtnClick')" class="emuwebapp-mini-btn" ng-click="downloadAnnotationBtnClick();">download Annotation</button> 
      <button id="spectSettingsBtn" ng-show="cps.vals.activeButtons.specSettings" ng-disabled="!vs.getPermission('spectSettingsChange')" class="emuwebapp-mini-btn" ng-click="spectSettingsBtnClick();">spec. settings</button>

	<div class="emuwebapp-nav-wrap">
	<ul>
	  <li>  <button id="demoDB" type="button" class="emuwebapp-toggle-button" ng-show="cps.vals.activeButtons.openDemoDB" ng-disabled="!vs.getPermission('openDemoBtnDBclick')">
			  open demo DB <span class="caret"></span>
			</button>

			<ul class="dropdown-menu" ng-show="cps.vals.activeButtons.openDemoDB">
			  <li><em>Choose DB:</em></li>
			  <li class="divider"></li>
			  <li ng-repeat="curDB in cps.vals.demoDBs">
				<a ng-click="openDemoDBbtnClick(curDB);" id="demo{{$index}}">{{curDB}}</a>
			  </li>
			</ul>

	  </li>
	</ul>
	</div>

      <button ng-show="cps.vals.activeButtons.connect" ng-disabled="!vs.getPermission('connectBtnClick')" class="emuwebapp-mini-btn" ng-click="connectBtnClick();">{{connectBtnLabel}}</button>
      <button class="emuwebapp-mini-btn" ng-click="showHierarchyBtnClick();" ng-disabled="!vs.getPermission('showHierarchyBtnClick')" ng-show="cps.vals.activeButtons.showHierarchy">show hierarchy</button>
      <button class="emuwebapp-mini-btn" ng-click="showEditDBconfigBtnClick();" ng-disabled="!vs.getPermission('editDBconfigBtnClick')" ng-show="cps.vals.activeButtons.editDBconfig">edit DBconfig</button>

      <button ng-show="cps.vals.activeButtons.clear" id="clear" ng-disabled="!vs.getPermission('clearBtnClick')" class="emuwebapp-mini-btn" ng-click="clearBtnClick();">clear</button>
      <button id="aboutBtn" class="emuwebapp-SideMenuBtn2 emuwebapp-aboutBtn right" ng-click="aboutBtnClick();"><img src="assets/EMU-webAppEmu.svg"></button>
    </div>

    <!-- vertical split layout that contains top and bottom pane -->
    <div class="emuwebapp-allCans">
      <bg-splitter show-two-dim-cans="{{cps.vals.perspectives[vs.curPerspectiveIdx].twoDimCanvases.order.length > 0}}"> 
      <bg-pane type="topPane" min-size="80" max-size="500" class="emuwebapp-topPane">
        <ul class="emuwebapp-timeline-flexcontainer">
          <li class="emuwebapp-timeline-flexitem" ng-style="{'height': getEnlarge({{$index}}) }" ng-repeat="curTrack in cps.vals.perspectives[vs.curPerspectiveIdx].signalCanvases.order track by $index" ng-switch on="curTrack">
            <osci ng-switch-when="OSCI" order="{{$index}}" track-name="{{curTrack}}"></osci>
            <spectro ng-switch-when="SPEC" order="{{$index}}" track-name="{{curTrack}}"></spectro>
            <ssff-track track-name="{{curTrack}}" ng-switch-default order="{{$index}}"></ssff-track>
          </li>
        </ul>
    </bg-pane>
    <bg-pane type="bottomPane" min-size="80" class="emuwebapp-bottomPane">
    <div>
      <ul>
        <li ng-repeat="level in dataServ.getLevelData() | levelsFilter track by $index" id="{{$index}}">
          <level id="{{level.name}}" open="true" level="level" idx="$index"></level>
        </li>
      </ul>
    </div>
  </bg-pane>
  <bg-pane type="emuwebapp-bottomRightResizePane">
  <ul>
    <li ng-repeat="cur2dTrack in cps.vals.perspectives[vs.curPerspectiveIdx].twoDimCanvases.order" ng-switch on="cur2dTrack">
      <epg ng-switch-when="EPG"></epg>
      <dots ng-switch-when="DOTS"></dots>
    </li>
  </ul>
</bg-pane>
</bg-splitter>

  <history-action-popup ng-show="vs.historyActionTxt !=''"></history-action-popup>

</div>


<!-- bottom menu bar -->
<div class="emuwebapp-menuBarBottom">
  <div>
    <preview id="preview" class="preview" current-bundle-name="{{getCurBndlName()}}"></preview>  
  </div>
  <button id="zoomAllBtn" ng-click="cmdZoomAll();" ng-disabled="!vs.getPermission('zoom')" class="emuwebapp-mini-btn" id="cmd_viewZoomAll">all</button>
  <button id="zoomInBtn" ng-click="cmdZoomIn();" ng-disabled="!vs.getPermission('zoom')" class="emuwebapp-mini-btn" id="cmd_viewZoomIn">in</button>
  <button id="zoomOutBtn" ng-click="cmdZoomOut();" ng-disabled="!vs.getPermission('zoom')" class="emuwebapp-mini-btn" id="cmd_viewZoomOut">out</button>
  <button id="zoomLeftBtn" ng-click="cmdZoomLeft();" ng-disabled="!vs.getPermission('zoom')" class="emuwebapp-mini-btn" id="cmd_viewMoveLeft">left</button>
  <button id="zoomRightBtn" ng-click="cmdZoomRight();" ng-disabled="!vs.getPermission('zoom')" class="emuwebapp-mini-btn" id="cmd_viewMoveRight">right</button>
  <button id="zoomSelBtn" ng-click="cmdZoomSel();" ng-disabled="!vs.getPermission('zoom')" class="emuwebapp-mini-btn" id="cmd_viewZoomSelect">selection</button>
  <button id="playViewBtn" ng-show="cps.vals.restrictions.playback" ng-click="cmdPlayView();" ng-disabled="!vs.getPermission('playaudio')" class="emuwebapp-mini-btn" id="cmd_playPause">play in view</button>
  <button id="playSelBtn" ng-show="cps.vals.restrictions.playback" ng-click="cmdPlaySel();" ng-disabled="!vs.getPermission('playaudio')" class="emuwebapp-mini-btn" id="cmd_playSelected">play selected</button>
  <button id="playAllBtn" ng-show="cps.vals.restrictions.playback" ng-click="cmdPlayAll();" ng-disabled="!vs.getPermission('playaudio')" class="emuwebapp-mini-btn" id="cmd_playAll">play entire file</button>
</div>

<!-- perspectives menu bar (right) -->
<nav class="emuwebapp-rightSideMenu" ng-show="cps.vals.restrictions.showPerspectivesSidebar" show-menu="vs.getRightsubmenuOpen()">
  <button class="emuwebapp-rightSideMenuOpenBtn" ng-click="vs.setRightsubmenuOpen(!vs.getRightsubmenuOpen());"><img src="styles/images/rightSideMenuBtn.png"></button>
  <h3>Perspectives</h3>
  <ul>
    <li ng-repeat="persp in cps.vals.perspectives" ng-click="changePerspective(persp);" ng-class="getPerspectiveColor(persp);">{{persp.name}}</li>
  </ul>
</nav>

<!-- main window end -->
</div>
</div>